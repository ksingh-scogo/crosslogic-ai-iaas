# CrossLogic AI IaaS - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s
SERVER_IDLE_TIMEOUT=120s

# Public URL for node agent registration (must be HTTPS in production)
CONTROL_PLANE_URL=https://api.crosslogic.ai

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=crosslogic
DB_PASSWORD=your_secure_password_here
DB_NAME=crosslogic_iaas
DB_SSL_MODE=require  # Use 'disable' for local development only
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10

# ============================================================================
# JUICEFS CONFIGURATION (Required for 10x faster model loading)
# ============================================================================
# Redis URL for JuiceFS metadata (can be same as above or dedicated instance)
# Format: redis://host:port/db or redis://:password@host:port/db
JUICEFS_REDIS_URL=redis://localhost:6379/1

# S3 bucket for model storage
# Format: https://s3.amazonaws.com/bucket-name or https://bucket-name.s3.region.amazonaws.com
# NOTE: You must create this S3 bucket manually before first use
JUICEFS_BUCKET=https://s3.us-east-1.amazonaws.com/crosslogic-models

# AWS credentials for S3 access
# Get these from AWS IAM console: https://console.aws.amazon.com/iam/
JUICEFS_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE
JUICEFS_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Alternative cloud storage providers (adjust JUICEFS_BUCKET accordingly):
# - Backblaze B2: https://s3.us-west-001.backblazeb2.com/crosslogic-models
# - Wasabi: https://s3.us-east-1.wasabisys.com/crosslogic-models
# - DigitalOcean Spaces: https://crosslogic-models.nyc3.digitaloceanspaces.com
# - Google Cloud Storage (S3-compatible): https://storage.googleapis.com/crosslogic-models

# ============================================================================
# BILLING CONFIGURATION (Stripe)
# ============================================================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
BILLING_AGGREGATION_INTERVAL=1h
BILLING_EXPORT_INTERVAL=5m

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
API_KEY_HASH_ROUNDS=12
JWT_SECRET=your_jwt_secret_at_least_32_chars_long
TLS_ENABLED=false  # Set to true in production
TLS_CERT_PATH=/path/to/cert.pem
TLS_KEY_PATH=/path/to/key.pem

# Admin API token for internal services and deployment controller
ADMIN_API_TOKEN=your_admin_token_at_least_32_chars_long

# ============================================================================
# RUNTIME CONFIGURATION
# ============================================================================
# vLLM and PyTorch versions (update as needed)
VLLM_VERSION=0.6.2
TORCH_VERSION=2.4.0

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
MONITORING_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_PATH=/metrics
LOG_LEVEL=info  # Options: debug, info, warn, error

# ============================================================================
# NOTIFICATION CONFIGURATION (Optional)
# ============================================================================
# Discord webhook for system notifications
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your_webhook_id/your_webhook_token

# Slack webhook for alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email settings (for email notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@example.com
SMTP_PASSWORD=your_app_password
SMTP_FROM=noreply@crosslogic.ai

# ============================================================================
# SKYPILOT CONFIGURATION
# ============================================================================
# SkyPilot will use cloud credentials from:
# - AWS: ~/.aws/credentials or AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY
# - GCP: ~/.config/gcloud/application_default_credentials.json or GOOGLE_APPLICATION_CREDENTIALS
# - Azure: ~/.azure/credentials or AZURE_SUBSCRIPTION_ID/AZURE_TENANT_ID/AZURE_CLIENT_ID/AZURE_CLIENT_SECRET

# Optional: Default cloud provider preference (aws, gcp, azure, lambda)
DEFAULT_PROVIDER=aws

# Optional: Default region preference
DEFAULT_REGION=us-west-2

# ============================================================================
# SKYPILOT API SERVER CONFIGURATION
# ============================================================================
# Enable SkyPilot API Server mode (set to true for centralized cluster management)
SKYPILOT_USE_API_SERVER=true

# SkyPilot API Server URL (internal Docker network URL)
SKYPILOT_API_SERVER_URL=http://skypilot-api:46580

# Service account token for authenticating with SkyPilot API Server
# IMPORTANT: Change this in production to a strong, randomly generated token
SKYPILOT_SERVICE_ACCOUNT_TOKEN=your_skypilot_service_token_at_least_32_chars

# Encryption key for encrypting cloud credentials in the database
# IMPORTANT: Must be at least 32 characters. Keep this secret and back it up!
# If you lose this key, you will not be able to decrypt stored credentials.
SKYPILOT_CREDENTIAL_ENCRYPTION_KEY=your_encryption_key_minimum_32_chars_long

# SkyPilot database type (sqlite or postgres)
# - sqlite: Stores state in volume-mounted ~/.sky directory (default, simpler)
# - postgres: Stores state in PostgreSQL (recommended for production)
SKYPILOT_DB_TYPE=sqlite

# AWS Credentials (for SkyPilot to launch clusters on AWS)
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_DEFAULT_REGION=us-west-2

# Google Cloud credentials (optional - for GCP cluster launches)
# Point to a service account JSON key file
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# Azure credentials (optional - for Azure cluster launches)
AZURE_SUBSCRIPTION_ID=your_azure_subscription_id
AZURE_TENANT_ID=your_azure_tenant_id
AZURE_CLIENT_ID=your_azure_client_id
AZURE_CLIENT_SECRET=your_azure_client_secret

# ============================================================================
# DEVELOPMENT / DEBUGGING
# ============================================================================
# Set to true to enable debug mode (verbose logging, no authentication, etc.)
DEBUG_MODE=false

# Set to true to enable SQL query logging
DB_LOG_QUERIES=false

# Set to true to disable actual cloud provisioning (dry-run mode)
DRY_RUN=false
